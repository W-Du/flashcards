{% extends "_toggle.html" %}


{% block styles %}
    <link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='css/flashcard-flip.css') }}">
{% endblock %}


{% block toggle %}
<h1>Practice</h1>

<nav>
    <a 
    {% if current_user.is_authenticated %} href="/user/{{ user.username }}"
    {% else %} href="/guest" 
    {% endif %}>Home</a>
</nav>

{% if cur_word %}
<div class="card" id="toggle-word">
    <div class="front" style="border-color: {{ color }}">
        <h2 id="word"> {{ cur_word.word}} </h2>
    </div>
    <div class="back" style="border-color: {{ color }}">
        <p>Meaning:</p>
        <h3>{{ cur_word.description }}</h3>
    </div>
</div>
{% else %}
<p>no word</p>
{% endif %}


<form method="POST"
{% if current_user.is_authenticated %} action="/user/{{ user.username }}/word-priority"
{% else %} action="/guest/word-priority"
{% endif %}>
    <input type="hidden", name="word_id", 
    {% if current_user.is_authenticated %} value="{{ cur_word.id }}"
    {% else %} value="{{ cur_word.word }}"
    {% endif %}>
    <input type="hidden", name="cur_index", value="{{ cur_word_idx }}">
    <input type="checkbox" name="action" id='not_remember' value="not_remember">Do not have a clue</button>
    <input type="checkbox" name="action" id='remember' value="remember">I got this</button>
    <button type="submit">Next</button>
</form>

<div id="not_remember_text" style="display: none;">
    <p style="color:green">This word will come up again</p>
</div>

<div id="remember_text" style="display: none;">
    <p style="color:green">You learnt this word, it will not be shown to you for a while</p>
</div>



<script>
    let isFlipped = false;
    const flashcard = document.getElementById('toggle-word');
    flashcard.addEventListener('click', ()=>{
        isFlipped = !isFlipped;
        flashcard.style.transform = isFlipped ? 'rotateY(180deg)' : 'rotateY(0)';
    })

    document.getElementById('not_remember').addEventListener('click', ()=>{
        toggleText('not_remember', 'not_remember_text');
        disableCheckbox('not_remember', 'remember');
    })

    document.getElementById('remember').addEventListener('click', ()=>{
        toggleText('remember', 'remember_text');
        disableCheckbox('remember', 'not_remember');
    })

    const toggleText = (checkboxId, textId) =>{
        const checkbox = document.getElementById(checkboxId)
        const text = document.getElementById(textId)
        if (checkbox.checked == true){
            text.style.display = 'block'
        } else {
            text.style.display = 'none'
        }
    }

    const disableCheckbox = (id1, id2) => {
        const checkbox1 = document.getElementById(id1);
        const checkbox2 = document.getElementById(id2);
        if(checkbox1.checked == true){
            checkbox2.disabled = true
        } else {
            checkbox2.disabled = false
        }
    }
</script>

{% endblock %}

